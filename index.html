<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Side Porch Coffee Co. - A cozy local coffee shop serving warm beverages and community spirit in the heart of our small town.">
    <title>Side Porch Coffee Co. - Welcome Home</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="logo"><img src="./assets/badge.png" alt="Side Porch Coffee Co."></a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="menu.html">Menu</a></li>
                <li><a href="coffee-club.html">Coffee Club</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="login.html">Login</a></li>
                <li class="admin-nav-link" style="display: none;"><a href="admin.html">Staff</a></li>
                <li class="dev-nav-link" style="display: none;"><a href="dev.html">Dev</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-image-container">
            <img src="./assets/front-door.png" alt="Side Porch Coffee Co. front entrance">
        </div>
        <div class="hero-content">
            <p>Where every cup is brewed with care, and every visit feels like coming home. Step into our cozy corner of the world, where the aroma of freshly ground beans meets the warmth of small-town hospitality.</p>
            <a href="contact.html" class="btn btn-secondary">Visit Us</a>
        </div>
    </section>

    <main>
        <section class="section texture-overlay">
            <div class="content-card">
                <h2 class="section-title">A Place to Belong</h2>
                <div style="position: relative; z-index: 2;">
                    <p style="font-size: 1.2rem; text-align: center; color: var(--text-dark); line-height: 1.9;">
                        Tucked along the southbound frontage road in South College Station, Side Porch Coffee Co. is a cozy retreat where neighbors gather, friends linger, and new connections bloom.  Our cozy and charming space invites you to pause, sip, and savor handcrafted drinks made with locally sourced ingredients.  Nestled in the heart of our charming town, Side Porch Coffee Co. is more than just a caf√©‚Äîit's a gathering place where neighbors become friends and strangers become family.  Our cozy and charming space invites you to slow down, savor the moment, and enjoy handcrafted beverages made with locally sourced ingredients.
                    </p>
                    <p style="font-size: 1.1rem; text-align: center; margin-top: 1.5rem; color: var(--auburn); font-style: italic;">
                        From our homemade Chocolate powder lattes to our seasonal pumpkin spice creations, every drink tells a story of tradition, quality, and the simple joy of a perfect cup of coffee.
                    </p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">What Makes Us Special</h2>
            <div class="menu-grid">
                <div class="content-card">
                    <h3>‚òï Handcrafted Beverages</h3>
                    <p>Each cup is carefully prepared by our skilled baristas using premium beans and time-honored techniques. We take pride in every pour, every steam, every perfect foam.</p>
                </div>
                <div class="content-card">
                    <h3>üçÇ Seasonal Specials</h3>
                    <p>Our menu changes with the seasons, featuring autumn favorites like spiced apple cider, maple pecan lattes, and warm cinnamon rolls fresh from the oven.</p>
                </div>
                <div class="content-card">
                    <h3>üíö Community Focus</h3>
                    <p>We source our ingredients locally whenever possible, supporting our neighbors and bringing you the freshest flavors our region has to offer.</p>
                </div>
                <div class="content-card">
                    <h3>üè° Cozy Atmosphere</h3>
                    <p>Our warm, inviting space features comfortable seating, soft lighting, and d√©cor that celebrates the rustic charm of small-town life. It's the perfect place to work, read, or simply be.</p>
                </div>
                <div class="content-card">
                    <h3>üíª Coffee Club Online</h3>
                    <p>Experience our innovative prepaid account system and interactive ordering platform. Join the Coffee Club and enjoy seamless online ordering with account management.</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Side Porch Coffee Co. All rights reserved.</p>
        <p>Brewed with ‚ù§Ô∏è in our small town</p>
        <p>Site managed by <a href="http://www.jeffreyloehr.com/2KMJ-Studios" class="footer-link">2KMJ-Studios</a></p>
    </footer>

    <script src="config.public.js"></script>
    <script src="config.local.js" onerror="console.log('config.local.js not found')"></script>
    <script src="js/config.js"></script>
    <script src="js/supabase-client.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/account-manager.js"></script>
    <script src="js/admin-manager.js"></script>
    <script src="js/dev-manager.js"></script>
    <script src="js/nav-active.js"></script>
    <script src="js/nav-login-logout.js"></script>
    <script src="js/nav-admin-link.js"></script>
    <script>
        // Update admin and dev link visibility when page loads
        async function updateLinkVisibility() {
            // Check dev access first (doesn't require database)
            if (typeof devManager !== 'undefined') {
                try {
                    const user = await authManager.getCurrentUser();
                    if (!user) {
                        console.log('No user found, hiding dev link');
                        document.querySelectorAll('.dev-nav-link').forEach(link => {
                            link.style.display = 'none';
                        });
                    } else {
                        const isDev = await devManager.isDeveloper();
                        console.log('Dev link check result:', isDev, 'User email:', user.email);
                        const devLinks = document.querySelectorAll('.dev-nav-link');
                        console.log('Found dev links:', devLinks.length);
                        devLinks.forEach(link => {
                            link.style.display = isDev ? 'list-item' : 'none';
                            console.log('Set dev link display to:', isDev ? 'list-item' : 'none', link);
                        });
                    }
                } catch (error) {
                    console.error('Error checking dev access:', error);
                    document.querySelectorAll('.dev-nav-link').forEach(link => {
                        link.style.display = 'none';
                    });
                }
            }
            
            // Check admin access
            if (typeof adminManager !== 'undefined') {
                try {
                    await authManager.getCurrentUser();
                    const isStaff = await adminManager.isStaff();
                    document.querySelectorAll('.admin-nav-link').forEach(link => {
                        link.style.display = isStaff ? '' : 'none';
                    });
                } catch (error) {
                    console.error('Error checking admin access:', error);
                }
            }
            
            // Update navigation and footer (these may fail due to database issues, but that's OK)
            if (typeof devManager !== 'undefined') {
                try {
                    await devManager.updateNavigationVisibility();
                } catch (error) {
                    console.warn('Error updating navigation visibility:', error);
                }
                try {
                    await devManager.updateFooterSocialLinks();
                } catch (error) {
                    console.warn('Error updating footer social links:', error);
                }
            }
        }
        
        window.addEventListener('supabaseReady', updateLinkVisibility);
        
        // Also update when auth state changes (e.g., after sign in)
        window.addEventListener('authStateChanged', updateLinkVisibility);
        
        // Also check on DOMContentLoaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', async () => {
                if (typeof adminManager !== 'undefined' && configManager.isSupabaseConfigured()) {
                    await authManager.getCurrentUser();
                    const isStaff = await adminManager.isStaff();
                    document.querySelectorAll('.admin-nav-link').forEach(link => {
                        link.style.display = isStaff ? '' : 'none';
                    });
                }
                if (typeof devManager !== 'undefined' && configManager.isSupabaseConfigured()) {
                    await authManager.getCurrentUser();
                    const isDev = await devManager.isDeveloper();
                    document.querySelectorAll('.dev-nav-link').forEach(link => {
                        link.style.display = isDev ? '' : 'none';
                    });
                    await devManager.updateNavigationVisibility();
                    await devManager.updateFooterSocialLinks();
                }
            });
        }
    </script>
</body>
</html>

